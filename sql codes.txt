CREATE TABLE employees(

   emp_no VARCHAR2(5) PRIMARY KEY,
   emp_name VARCHAR2(20),
   password_hash VARCHAR2(255) NOT NULL,
   status VARCHAR2(20) DEFAULT 'ACTIVE',
   role          VARCHAR2(20) DEFAULT 'USER',
);

INSERT INTO employees (
  emp_no, emp_name, password_hash, role, status
)
VALUES (
  emp_no_seq.NEXTVAL,
  'John Doe',
  'dummy_hash',
  'USER',
  'ACTIVE'
);

COMMIT;

//get by id
CREATE OR REPLACE PROCEDURE get_employee_by_id (
  p_emp_no IN VARCHAR2,
  p_result OUT SYS_REFCURSOR
) IS
BEGIN
  OPEN p_result FOR
    SELECT emp_name, status, role
    FROM employees
    WHERE emp_no = p_emp_no;
END;
/

//get all
CREATE OR REPLACE PROCEDURE get_all_employees (
  p_result OUT SYS_REFCURSOR
) IS
BEGIN
  OPEN p_result FOR
    SELECT emp_no, emp_name, status, role
    FROM employees;
END;
/
